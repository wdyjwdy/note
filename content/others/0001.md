---
title: Bible Database Design
group: Others
toc: true
---

## Tables

### Versions

| Column Name | Type         | Example                  |
| ----------- | ------------ | ------------------------ |
| id          | INTEGER (PK) | 1                        |
| language    | TEXT         | en                       |
| name        | TEXT         | English Standard Version |
| code        | TEXT         | ESV                      |

### Books

| Column Name | Type         | Example |
| ----------- | ------------ | ------- |
| id          | INTEGER (PK) | 1       |
| version_id  | INTEGER (FK) | 1       |
| book        | INTEGER      | 1       |
| name        | TEXT         | Genesis |
| code        | TEXT         | Gen     |
| chapters    | INTEGER      | 50      |

### Verses

```sql
CREATE TABLE verses (
  id INTEGER PRIMARY KEY AUTOINCREMENT,

  version_id INTEGER NOT NULL,
  book INTEGER NOT NULL,
  chapter INTEGER NOT NULL,
  verse INTEGER NOT NULL,

  text TEXT NOT NULL,
  heading TEXT,
  name_ranges TEXT,

  UNIQUE(version_id, book, chapter, verse),
  FOREIGN KEY (version_id) REFERENCES versions(id)
);
```

| Column Name | Type         | Example             |
| ----------- | ------------ | ------------------- |
| id          | INTEGER (PK) | 1                   |
| version_id  | INTEGER (FK) | 1                   |
| book        | INTEGER      | 1                   |
| chapter     | INTEGER      | 1                   |
| verse       | INTEGER      | 1                   |
| text        | TEXT         | In the beginning... |
| heading     | TEXT         | The Creation...     |

### Favorites

| Column Name | Type         | Example    |
| ----------- | ------------ | ---------- |
| id          | INTEGER (PK) | 1          |
| version_id  | INTEGER (FK) | 1          |
| book        | INTEGER      | 1          |
| chapter     | INTEGER      | 1          |
| verse       | INTEGER      | 1          |
| date        | TEXT         | 2020-01-01 |

## Views

### Favorite Verses

```sql
CREATE VIEW favorite_verses AS
SELECT V.id, V.version_id, V.book, V.chapter, V.verse, V.text, V.names, F.date
FROM verses AS V
    JOIN favorites AS F
        ON V.version_id = F.version_id
        AND V.book = F.book
        AND V.chapter = F.chapter
        AND V.verse = F.verse;
```

## Queries

### Search Verses by Chapter

```sql
SELECT *
FROM verses
WHERE version_id = 1
  AND book = 1
  AND chapter = 1;
```

### Search Verses by Text

```sql
SELECT *
FROM verses
WHERE version_id = 1
  AND text LIKE '%key%';
```

### Search Verses by Favorite

```sql
SELECT *
FROM verses AS v
  INNER JOIN favorites as f
    ON v.version_id = f.version_id
      AND v.book = f.book
      AND v.chapter = f.chapter
      AND v.verse = f.verse;
```
